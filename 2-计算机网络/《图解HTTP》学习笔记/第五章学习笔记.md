第五章：与HTTP协作的Web服务器

一台Web服务器可搭载多个独立域名的Web网站，也可作为通信路径上的中转服务器提升传输效率

1、用单台虚拟主机实现多个域名

在相同的IP地址下，由于虚拟主机可以寄存多个不同主机名和域名的Web网站，因此在发送HTTP请求时，必须组Host首部内完整指定主机名或域名的URI

2、通信数据转发程序：代理、网关、隧道

HTTP通信时，配合服务器工作的转发程序

1）代理：是一种有转发功能的应用程序，转发服务器和客户端之间的请求和响应

代理服务器的基本行为就是接收客户端发送的请求后转发给其他服务器，代理不改变请求的URI；使用代理服务器的理由是：利用缓存技术减少网络带宽的流量，组织内部针对特定网站的访问控制，以获取访问日志为主要目的，等等

·缓存代理：代理转发响应时，缓存代理会预先将资源的副本（缓存）保存在代理服务器上；当代理再次接收到对相同资源的请求时，就可以不从源服务器那里获取资源，而是将之前缓存的资源作为响应返回

·透明代理：转发请求或响应时，不对报文做任何加工的代理类型被称为透明代理。反之，对报文内容进行加工的代理被称为非透明代理

2）网关：是转发其他服务器通信数据的服务器；接收从客户端发送的请求时，它就像自己拥有资源的源服务器一样对请求进行处理。

网关的工作机制和代理十分相似。而网关能使通信线路上的服务器提供非HTTP协议服务；利用网关能提高通信的安全性，因为可以在客户端与网关之间的通信线路上加密以确保连接的安全。如：网关可以连接数据库，使用SQL语句查询数据；在Web网站上进行信用卡结算时，网关可以和信用卡结算系统联动

3）隧道：是在相隔甚远的客户端和服务器两者之间进行中转，并保持双方通信连接的应用程序

隧道可按要求建立一条与其他服务器的通信线路，届时使用SSL等加密手段进行通信。隧道的目的是确保客户端和服务器端进行安全的通信

3、保存资源的缓存

缓存是指代理服务器或客户端本地磁盘内保存的资源副本。利用缓存可减少对源服务器的访问，因此也就节省了通信流量和通信时间

1）缓存的有效期限

2）客户端的缓存

缓存不仅可以存在代理服务器中，还可以存在客户端游览器中（称为：临时网络文件）；如果游览器缓存有效，就不必再向服务器请求相同的资源了，可以直接从本地磁盘内读取。

4、在HTTP出现之前的协议

FTP、NNTP、Archie、WAIS、Gopher
